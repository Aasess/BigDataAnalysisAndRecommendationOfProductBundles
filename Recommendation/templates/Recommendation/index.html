<!DOCTYPE html>
<html lang="en">
<head>
    {% load static %}
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Welcome to Instacart</title>
    <!--font-->
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
    <!--bootstrap4 cdn-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <!--custom css-->
    <link rel="stylesheet" href="{% static 'style.css' %}">
    <!--fontawesome-->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body>
    <!-- As a link -->
    <div>
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
            <a class="navbar-brand" href="{% url 'homepage' %}"><img src="https://d2guulkeunn7d8.cloudfront.net/assets/beetstrap/brand/logo@3x-c01b12eeb889d8665611740b281d76fa1cf88d06bcbd8a50dbcae6baecdbe9da.png" height=45 width=130></a>
            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                    <a class="nav-link pr-3" href="#">Register</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link pl-3" href="#">Log In</a>
                </li>
            </ul>
        </nav>
    </div>

    <div class="jumbotron pb-0 pt-4">
        <div class="container">
            <h2 class="display-4">Instacart Market Basket Analysis</h2>
            <p class="text-secondary">Instacart is a same-day grocery delivery service that can save yourself that trip to the market.</p>
            <hr class="mt-4">

            <div class="row mt-5">
                <div class="col-5 ">
                    <p class="alert alert-primary mb-3"><span class="ml-4">Total No. of Orders:</span> <strong class="ml-5 pl-5">3.2 Millions</strong></p>
                    <p class="alert alert-primary mb-3"><span class="ml-4">Total No. of Users:</span> <strong class="ml-5 pl-5"> 206,209</strong></p>
                    <p class="alert alert-primary mb-3"><span class="ml-4">Total No. of Products:</span> <strong class="ml-5 pl-4"> 49,688</strong></p>
                    <p class="alert alert-primary mb-3"><span class="ml-4">Total No. of Rules Generated:</span> <strong class="ml-3 pl-1"> 15,709</strong></p>
                </div>
                <div class="col-7 shadow-lg p-3 mb-5 bg-white rounded">
                    <p>Search for any products and we will provide the best recommendation for you.</p>
                    <hr>
                    <form method="GET" autocomplete="off" action="{% url 'productsearch' %}">
                         <div class="form-group">
                            <label for="formControlRange" class="text-secondary">Select number of recommendations: <output id="rangeoutput">5</output></label>
                            <input type="range" class="form-control-range" id="range" min="1" max="15" value="5" name="recom">
                        </div>
                        <div class="form-group">
                            <input class="form-control mr-sm-2 " type="text" placeholder="Search for product" name="product_name" id="search" autocomplete="off" list="datalist">
                            {% if error_get %}
                                 <small class="text-danger ml-2"><i class="fa fa-exclamation-circle"></i> {{ error_get }}</small>
                            {% endif %}
                           <datalist id="datalist"></datalist>
                        </div>
                        <button class="btn btn-info my-2 my-sm-0" type="submit">Search</button>
                        
                    </form>
                </div>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="row">
            <div class="col-7">
                <h2>Basket</h2>

                <ul>
                {% for item in basket %}
                    <li>{{ item }}</li>
                {% endfor %}
                </ul> 
                <form method="post">
                    <button type="submit" class="btn btn-primary">Reset basket</button>
                </form>
                <hr>
                <h2>Recommendations</h2>

                <form method="post">
                    <ul>
                    {% for item in recommendations %}
                        <li>
                            <input type="checkbox" id="item-{{ item }}" name="items" value="{{ item }}" />
                            <label for="items">{{ item }}</label>
                        </li>
                    {% endfor %}
                    </ul>
                    {% if recommendations %}
                    <button type="submit" class="btn btn-primary">Add to basket</button>
                    {% endif %}
                </form>
                <hr>

                <h2>Product Available</h2>

                <form method="post">
                    <button type="submit" class="btn btn-primary">Add to basket</button>
                    <ul>
                    {% for item in items %}
                        <li>
                            <input type="checkbox" id="item-{{ item }}" name="items" value="{{ item }}" />
                            <label for="items">{{ item }}</label>
                        </li>
                    {% endfor %}
                    </ul>
                </form>
            </div>

            <div class="col-5">
                Top Products Bundles
                <hr>
                <table class="table">
                <thead class="thead-dark">
                    <tr>
                    <th scope="col">#</th>
                    <th scope="col">Bundle</th>
                    <th scope="col">Frequency</th>
                    </tr>
                </thead>
                 <tbody>
                 {% for i,bundle in zippedBundles %}
                     <tr>
                    <th scope="row">{{ i }}</th>
                    <td>{{ bundle.firstproduct }} + {{ bundle.secondproduct }}</td>
                    <td class="text-right">{{ bundle.frequency }}</td>
                    </tr>
                 {% endfor %}
                </tbody>
            </div>
        </div>
    </div>
    <!-- custom js-->
    <script src="{% static 'app.js' %}"></script>
</body>
</html>
